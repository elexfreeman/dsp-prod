<div class="wrapper">
    <div class="sidebar" data-background-color="white" data-active-color="danger">

        <!--
            Tip 1: you can change the color of the sidebar's background using: data-background-color="white | black"
            Tip 2: you can change the color of the active button using the data-active-color="primary | info | success | warning | danger"
        -->

        <div class="sidebar-wrapper">
            <div class="logo">
                <a href=""  ng-click="toLink('')" class="simple-text text-center">МИАЦ <br>диспансеризация<br>{{s.lpucode}}
                <br><span class="as1">Актуальный срез от {{LoadPlansDate}}</span>
                </a>
            </div>

            <ul class="nav">
                <li ng-repeat="n in navbar">
                    <a href="" ng-click="toLink(n.link)">
                        <i ng-class="n.icon"></i>
                        <p ng-bind-html="n.caption"></p>
                    </a>
                </li>
                <li>
                    <a ng-click="Logout()" class="pointer">
                        <i class="ti-arrow-top-right"></i>
                        <p>Выход</p>
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <div class="main-panel">
        <nav class="navbar navbar-default">
            <div class="container-fluid" style="padding-top: 10px;">
                <div class="row">
                    <div class="col-sm-3">Минимальная плановая численность подлежащих диспансеризации: <b>{{DspPlanForYear.plan_count  | priceFormat}}</b></div>
                    <div class="col-sm-3">Общая численность подлежащих диспансеризации:  <b>{{total | priceFormat}}</b></div>
                    <div class="col-sm-6">Численность включенных в план: <b><span id="pl_all"></span></b> (<span id="ppr">100</span>%)
                        <div class="row text-center">
                            <div class="col-xs-3 small"><p><b>I:</b><br><span id="pl_1"></span></p></div>
                            <div class="col-xs-3"><p><b>II:</b><br><span id="pl_2"></span></p></div>
                            <div class="col-xs-3"><p><b>III:</b><br><span id="pl_3"></span></p></div>
                            <div class="col-xs-3"><p><b>IV:</b><br><span id="pl_4"></span></p></div>


                        </div>
                    </div>

                </div>
              <!--  <div class="navbar-header">
                    <button type="button" class="navbar-toggle">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar bar1"></span>
                        <span class="icon-bar bar2"></span>
                        <span class="icon-bar bar3"></span>
                    </button>
                    <a class="navbar-brand pointer" ng-click="toLink('')">2017 г. - </a>
                    <a class="navbar-brand pointer" ng-click="toLink('')">План по диспансеризации</a>
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">

                        <li>
                            <a ng-click="Logout()" class="pointer">
                                <i class="ti-arrow-top-right"></i>
                                <p>Выход</p>
                            </a>
                        </li>
                    </ul>
                </div>-->
            </div>
        </nav>


        <div class="content" style="padding-top: 10px;">
            <div class="container-fluid">
              <!--  <div class="row plan">
                    <div class="col-lg-3 col-sm-6">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <div class="icon-big icon-warning text-center">
                                            <i class="ti-server"></i>
                                        </div>
                                    </div>
                                    <div class="col-xs-9">
                                        <div class="numbers">
                                            <p>Плановое кол-во в соответствии с планом МЗ СО</p><hr>
                                            {{DspPlanForYear.plan_count  | priceFormat}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-3 col-sm-6">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <div class="icon-big icon-warning text-center">
                                            <i class="ti-info"></i>
                                        </div>
                                    </div>
                                    <div class="col-xs-9">
                                        <div class="numbers">
                                            <p>Общее кол-во подлежат диспансеризации по РС ЕРЗЛ</p><hr>
                                            {{total | priceFormat}}
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 col-sm-6">
                        <div class="card">
                            <div class="content">
                                <div class="row">
                                    <div class="col-xs-2">
                                        <div class="icon-big icon-success text-center">
                                            <i class="ti-check"></i>
                                        </div>
                                    </div>
                                    <div class="col-xs-10">
                                        <div class="numbers">
                                            <p>Кол-во отмеченных для включения в план: <b><span id="pl_all"></span></b> (<span id="ppr">100</span>%)</p>
                                            <hr>
                                           <div class="row text-center">
                                                <div class="col-xs-3 small"><p><b>I:</b><br><span id="pl_1"></span></p></div>
                                                <div class="col-xs-3"><p><b>II:</b><br><span id="pl_2"></span></p></div>
                                                <div class="col-xs-3"><p><b>III:</b><br><span id="pl_3"></span></p></div>
                                                <div class="col-xs-3"><p><b>IV:</b><br><span id="pl_4"></span></p></div>


                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>

                </div>-->
                <div class="row">
                    <div class="col-md-12">
                        <div class="card patients-table" >
                            <div class="header" style="padding-top: 10px;">
                                <form>
                                    <div class="row">
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label style="display: block;">Возраст с - по:</label>
                                                <div class="col-sm-6">
                                                    <select ng-change="RefreshFilter()" class="form-control border-input" ng-model="patient.age_beg" >
                                                        <option ng-repeat="age in age_list" value="{{age}}">{{age}}</option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-6">
                                                    <select ng-change="RefreshFilter()"  class="form-control border-input" ng-model="patient.age_end" >
                                                        <option ng-repeat="age in age_list" value="{{age}}">{{age}}</option>
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                        <div class="col-md-2">
                                            <div class="form-group">
                                                <label>Пол:</label>
                                                <div class="col-sm-12">
                                                    <select ng-change="RefreshFilter()" class="form-control border-input" ng-model="patient.sex" >
                                                        <option ng-repeat="s in sex_list" value="{{s.m}}">{{s.v}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-5">
                                            <div class="form-group">
                                                <label style="display: block;">Месяц даты рождения с - по:</label>
                                                <div class="col-sm-6">
                                                    <select ng-change="RefreshFilter()"  class="form-control border-input col-sm-6" ng-model="patient.month_beg" >
                                                        <option ng-repeat="month in month_list" value="{{month.m}}">{{month.month}}</option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-6">
                                                    <select ng-change="RefreshFilter()"  class="form-control border-input col-sm-6" ng-model="patient.month_end" >
                                                        <option ng-repeat="month in month_list" value="{{month.m}}">{{month.month}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div>Показать включенных:</div>
                                                <div class="col-sm-3">
                                                    <label class="" for="patinet_chk1">
                                                        <input type="checkbox" ng-change="RefreshFilter()" value="1" ng-model="patient.chk1" id="patinet_chk1" class="radio1"> I
                                                    </label>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="" for="patinet_chk2">
                                                        <input type="checkbox" ng-change="RefreshFilter()" value="1" ng-model="patient.chk2" id="patinet_chk2" class="radio1"> II
                                                    </label>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="" for="patinet_chk3">
                                                        <input type="checkbox" ng-change="RefreshFilter()" value="1" ng-model="patient.chk3" id="patinet_chk3" class="radio1"> III
                                                    </label>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="" for="patinet_chk4">
                                                        <input type="checkbox" ng-change="RefreshFilter()" value="1" ng-model="patient.chk4" id="patinet_chk4" class="radio1"> VI
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <div>Не соответствие TMODOC </div>
                                                <div class="col-sm-12">
                                                    <label class="" for="patinet_chk8">
                                                        <input type="checkbox" ng-change="RefreshFilter()" value="1" ng-model="patient.chk_red" id="patinet_chk8" class="radio1">
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Участок прикрепления:</label>
                                                <div class="col-sm-12">
                                                    <select ng-change="RefreshFilter()" class="form-control border-input" ng-model="patient.uch" >
                                                        <option value="">-</option>
                                                        <option ng-repeat="u in uch" value="{{u.num_uch}}">{{u.num_uch}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <div class="form-group">
                                                <label>Участковый врач:</label>
                                                <div class="col-sm-12">
                                                    <select ng-change="RefreshFilter()" class="form-control border-input" ng-model="patient.doc" >
                                                        <option value="">-</option>
                                                        <option ng-repeat="doc in doctors" value="{{doc.DRCODE}}">{{doc.SURNAME}} {{doc.NAME}} {{doc.SECNAME}}</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-2">
                                            <div class="form-group">
                                                <label>Фамилия:</label>
                                                <input type="text" ng-model="patient.surname" class="form-control border-input">
                                            </div>
                                        </div>
                                       <div class="col-sm-2">
                                            <div class="form-group">
                                                <label>Имя:</label>
                                                <input type="text" ng-model="patient.name"  class="form-control border-input">
                                            </div>
                                        </div>
                                       <div class="col-sm-2">
                                            <div class="form-group">
                                                <label>Отчество:</label>
                                                <input type="text" ng-model="patient.secname" class="form-control border-input">
                                            </div>
                                        </div>
                                        <div class="col-sm-3">
                                            <div class="form-group">
                                                <label>ЛПУ прикрепления:</label>
                                                    <select ng-change="RefreshFilter()" class="form-control border-input" ng-model="patient.LpuP" >
                                                        <option value="">-</option>
                                                        <option ng-repeat="l in LpuP" value="{{l.lpubase}}">{{l.lpubase}}</option>
                                                    </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <div>Есть ошибка после отправки в ТФОМС </div>
                                                <div class="col-sm-12">
                                                    <label class="" for="tfoms_error">
                                                        <input type="checkbox" ng-change="RefreshFilter()" value="1" ng-model="patient.tfoms_error" id="tfoms_error" class="radio1">
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="form-group">
                                                <label>Ошибка в ТФОМС:</label>
                                                <select ng-change="RefreshFilter()" class="form-control border-input" ng-model="patient.error_code" >
                                                    <option value="">-</option>
                                                    <option ng-repeat="ee in TfomsErrors" value="{{ee.error_code}}">{{ee.error_code}}: {{ee.description}}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-7">
                                            <button href="#fakelink" class="btn btn-fill btn-success btn-sm" ng-click="ShowChkAllModal(true)">Включить в план всех из текущего фильтра</button>

                                            <button href="#fakelink" class="btn btn-fill btn-error btn-sm" ng-click="ShowUnChkAllModal(true)">Исключить из плана всех из текущего фильтра</button>
                                        </div>
                                       <div class="col-sm-2">

                                       </div>
                                        <div class="col-sm-3 text-right">
                                            <button class="btn btn-fill btn-info  btn-sm" ng-click="RefreshFilter()" >
                                                <i class="ti-filter"></i> Применить</button>
                                           <button class="btn btn-warning  btn-sm" ng-click="ResetF()" >
                                               <i class="ti-reload"></i> Сбросить</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                            <div class="content table-responsive table-full-width" style="font-size: 11px;">
                                <table class="table table-striped table-hover" bs-table-control="bsTable" id="b1"></table>
                            </div>

                            <div class="legenda">
                                <div class="legenda-item">
                                    <div class="legenda-item-circle"></div>
                                    <div class="legenda-item-text"> - нет соответствия с TMODOC</div>
                                </div>
                                <div class="legenda-item">
                                    <div class="legenda-item-circle empty"></div>
                                    <div class="legenda-item-text"> - пациента можно включить в план</div>
                                </div>
                            </div>

                            <div style="overflow: auto">
                                <div class="content text-left" style="padding-top: 0;float: left">

                                    <div class="row">
                                        <div class="col-sm-4 text-left">
                                            <form method="post" action="/develop/api/dsp_patients/toexelFrom" style="display: inline-block">
                                                <input name="patient[surname]" id="surname" value="" type="hidden">
                                                <input name="patient[name]" id="name"  value="" type="hidden">
                                                <input name="patient[secname]" id="secname"  value="" type="hidden">
                                                <input name="patient[sex]"  id="sex" value="" type="hidden">
                                                <input name="patient[chk1]" id="chk1"  value="" type="hidden">
                                                <input name="patient[chk2]"  id="chk2" value="" type="hidden">
                                                <input name="patient[chk3]"  id="chk3" value="" type="hidden">
                                                <input name="patient[chk4]" id="chk4"  value="" type="hidden">
                                                <input name="patient[chk_red]"  id="chk_red" value="" type="hidden">
                                                <input name="patient[q]"  id="q" value="" type="hidden">
                                                <input name="patient[age_beg]" id="age_beg"  value="" type="hidden">
                                                <input name="patient[age_end]" id="age_end"  value="" type="hidden">
                                                <input name="patient[month_beg]"  id="month_beg" value="" type="hidden">
                                                <input name="patient[month_end]" id="month_end"  value="" type="hidden">
                                                <input name="patient[DRCODE]" id="DRCODE"  value="" type="hidden">
                                                <button class="btn btn-fill btn-success" type="submit">
                                                    <i class="ti-receipt"></i>  В Excel из текущего фильтра</button>
                                            </form>
                                        </div>
                                        <div class="col-sm-4 text-left">
                                            <form method="post" action="/develop/api/dsp_patients/toexelFromInPlan" style="display: inline-block">
                                                <button class="btn btn-fill btn-primary" type="submit">
                                                    <i class="ti-receipt"></i>  В Excel включенных в план</button>
                                            </form>
                                        </div>
                                        <div class="col-sm-4"></div>

                                        <div class="col-sm-4 text-right">
                                            <form action="/develop/api/dsp_patients/SendTfoms" style="display: inline-block">
                                            <button ng-show="s.lpucode==s.username"
                                               type="submit"
                                               class="btn btn-fill btn-warning"><i class="ti-arrow-right"></i>  Отправить в ТФОМС</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!--<footer class="footer">
            <div class="container-fluid">
                <nav class="pull-left">
                    <ul>

                        <li>
                            <a href="http://medlan.samara.ru">
                                МИАЦ 2017
                            </a>
                        </li>

                    </ul>
                </nav>
                <div class="copyright pull-right">
                    &copy; 2017, сделано с  <i class="fa fa-heart heart"></i>  <a href="https://vk.com/id20267596">elex</a>
                </div>
            </div>
        </footer>-->

    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="Loader" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Подождите! Идет обработка!</h4>
            </div>
            <div class="modal-body">
                <svg style="margin:0 auto" width='128px' height='128px' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="uil-default"><rect x="0" y="0" width="100" height="100" fill="none" class="bk"></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(0 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(30 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.08333333333333333s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(60 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.16666666666666666s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(90 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.25s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(120 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.3333333333333333s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(150 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.4166666666666667s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(180 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.5s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(210 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.5833333333333334s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(240 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.6666666666666666s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(270 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.75s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(300 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.8333333333333334s' repeatCount='indefinite'/></rect><rect  x='46.5' y='40' width='7' height='20' rx='5' ry='5' fill='#cfbe27' transform='rotate(330 50 50) translate(0 -30)'>  <animate attributeName='opacity' from='1' to='0' dur='1s' begin='0.9166666666666666s' repeatCount='indefinite'/></rect></svg>
            </div>
            <div class="modal-footer">
                <div class="left-side">

                </div>
                <div class="divider"></div>
                <div class="right-side">

                </div>
            </div>
        </div>
    </div>
</div>
<!--    end modal -->


<!-- Modal -->
<div class="modal fade" id="DialogCheck" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Выбрать всех из текущего фильтра?</h4>
            </div>
            <div class="modal-body">
                <div class="row text-center">
                    <div class="col-sm-6">
                        <button class="btn btn-fill btn-warning btn wd-200" ng-click="CheckAllFromFilter()">Да</button>
                    </div>
                    <div class="col-sm-6">
                        <button class="btn btn-fill btn-alert  wd-200" ng-click="ShowChkAllModal(false)">Нет</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="left-side">

                </div>
                <div class="divider"></div>
                <div class="right-side">

                </div>
            </div>
        </div>
    </div>
</div>
<!--    end modal -->

<!-- Modal -->
<div class="modal fade" id="DialogUnCheck" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Исключить из плана всех из текущего фильтра?</h4>
            </div>
            <div class="modal-body">
                <div class="row text-center">
                    <div class="col-sm-6">
                        <button class="btn btn-fill btn-warning btn wd-200" ng-click="UnCheckAllFromFilter()">Да</button>
                    </div>
                    <div class="col-sm-6">
                        <button class="btn btn-fill btn-alert  wd-200" ng-click="ShowUnChkAllModal(false)">Нет</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="left-side">

                </div>
                <div class="divider"></div>
                <div class="right-side">

                </div>
            </div>
        </div>
    </div>
</div>
<!--    end modal -->